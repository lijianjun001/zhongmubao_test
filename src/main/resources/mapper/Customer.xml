<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhongmubao.api.dao.CustomerDao">
    <!-- 目的：为dao接口方法提供sql语句配置 -->
    <select id="getCustomerByAccountAndPassword" resultType="Customer">
        <!-- 具体的sql -->
        SELECT
        *
        FROM
        Customer
        WHERE
        account = #{account} and password = #{password} limit 1
    </select>

    <select id="getCustomerById" resultType="Customer">
        <!-- 具体的sql -->
        SELECT
        *
        FROM
        Customer
        WHERE
        id = #{id} limit 1
    </select>

    <select id="pagerCustomerList" resultType="Customer">
        SELECT
        *
        FROM
        Customer
        ORDER BY
        id
        LIMIT #{offset}, #{limit}
    </select>

    <insert id="insertCustomer">
        <!-- ignore 主键冲突，报错 -->
        INSERT ignore INTO Customer (
        Account,
        Password,
        Sign,
        NickName,
        Name,
        Phone,
        Email,
        OpenId,
        CardType,
        CardNo,
        Photo,
        ReferenceId,
        IsGrantLibrary,
        Count,
        Platform,
        RegisterIP,
        RegisterAddredss,
        Deleted,
        Created,
        Modified,
        RedeemPassword,
        EnabledFingerprint,
        HadaCount,
        IsAutoRedeem,
        IsSetPassword
        )
        VALUES (
        #{account},
        #{password},
        #{sign},
        #{nickName},
        #{name},
        #{phone},
        #{email},
        #{openId},
        #{cardType},
        #{cardNo},
        #{photo},
        #{referenceId},
        #{isGrantLibrary},
        #{count},
        #{platform},
        #{registerIP},
        #{registerAddredss},
        #{deleted},
        #{created},
        #{modified},
        #{redeemPassword},
        #{enabledFingerprint},
        #{hadaCount},
        #{isAutoRedeem},
        #{isSetPassword}
        )
    </insert>

    <insert id="addCustomer">
        <!-- ignore 主键冲突，报错 -->
        INSERT ignore INTO Customer (
        Account,
        Password,
        Sign,
        NickName,
        Name,
        Phone,
        Email,
        OpenId,
        CardType,
        CardNo,
        Photo,
        ReferenceId,
        IsGrantLibrary,
        Count,
        Platform,
        RegisterIP,
        RegisterAddredss,
        Deleted,
        Created,
        Modified,
        RedeemPassword,
        EnabledFingerprint,
        HadaCount,
        IsAutoRedeem,
        IsSetPassword
        )
        VALUES (
        #{account},
        #{password},
        #{sign},
        #{nickName},
        #{name},
        #{phone},
        #{email},
        #{openId},
        #{cardType},
        #{cardNo},
        #{photo},
        #{referenceId},
        #{isGrantLibrary},
        #{count},
        #{platform},
        #{registerIP},
        #{registerAddredss},
        #{deleted},
        #{created},
        #{modified},
        #{redeemPassword},
        #{enabledFingerprint},
        #{hadaCount},
        #{isAutoRedeem},
        #{isSetPassword}
        )
    </insert>

    <update id="UpdatePassword">
        <!-- 具体的sql——重置密码 -->
        UPDATE
        Customer
        SET
        Password=#{password}
        WHERE
        id = #{id}
    </update>

    <update id="UpdateRedeemPassword">
        <!-- 具体的sql——重置赎回密码 -->
        UPDATE
        Customer
        SET
        RedeemPassword=#{redeemPassword}
        WHERE
        id = #{id}
    </update>

    <update id="UpdateIsAutoRedeem">
        <!-- 具体的sql——是否自动赎回 -->
        UPDATE
        Customer
        SET
        isAutoRedeem=#{isAutoRedeem}
        WHERE
        id = #{id}
    </update>
</mapper>